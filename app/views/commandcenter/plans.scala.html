@import java.util
@(billingId: String)

<p>You are now using the <strong>Developer</strong> free plan.</p>

<div class="sm-space"></div>

<div class="col-md-4">
    <div class="well plan">
        <h3 class="text-center"><strong>Professional</strong></h3>
        <hr class="sm-margin">
        <p class="text-center">1000 Daily Active Users</p>
        <hr class="sm-margin">
        <p class="text-center"><strong>€ 150.00/mo</strong></p>
        <hr class="sm-margin">
        <a id="professional" class="btn btn-block btn-action">Select</a>
    </div>
</div>

<div class="col-md-4">
    <div class="well plan">
        <h3 class="text-center"><strong>Business</strong></h3>
        <hr class="sm-margin">
        <p class="text-center">10000 Daily Active Users</p>
        <hr class="sm-margin">
        <p class="text-center"><strong>€ 1500.00/mo</strong></p>
        <hr class="sm-margin">
        <a id="business" class="btn btn-block btn-action">Select</a>
    </div>
</div>

<div class="col-md-4">
    <div class="well plan">
        <h3 class="text-center"><strong>Enterprise</strong></h3>
        <hr class="sm-margin">
        <p class="text-center">+10000 Daily Active Users</p>
        <hr class="sm-margin">
        <p class="text-center"><strong>Negotiable</strong></p>
        <hr class="sm-margin">
        <a href="mailto:support@@flowup.io?Subject=Subscribe%20to%20the%20enterprise%20plan"
           class="btn btn-block btn-action">Contact us</a>
    </div>
</div>

<script type="text/javascript" src="https://api.taxamo.com/js/v1/taxamo.all.js"></script>
<script type="text/javascript">
Taxamo.initialize('public_test_9QC3z9tNxxPOTze4GJzd4GC9JsVJJvv5OxW5v2t2BIo');

document.getElementById("professional").onclick = onProfessionalPlanClicked;
document.getElementById("business").onclick = onBusinessPlanClicked;

function onProfessionalPlanClicked() {
    onPlanClicked("company_plan");
}

function onBusinessPlanClicked() {
    onPlanClicked("enterprise_plan");
}

function onPlanClicked(planId) {
    var transaction = {
                        custom_id: "@billingId",
                        custom_fields: [
                            { key: 'taxed-plan-id', value: planId },
                            { key: 'untaxed-plan-id', value: planId + '_untaxed' }
                        ],
                        billing_country_code: Taxamo.defaultTransaction.billing_country_code
                      };
    var metadata    = { allowed_payment_providers: 'braintree',
                        subscription_mode: true,
                        show_email: true,
                        show_buyer_name: true,
                        show_invoice_address: true,
                        finished_redirect_url: self.location.href
                      };

    var checkout = new Taxamo.Checkout(transaction, metadata);
    checkout.overlay(function(data) {
        setTimeout(location.reload.bind(location), 1000);
    });
}
</script>